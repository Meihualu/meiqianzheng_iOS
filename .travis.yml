language: objective-c
cache: bundler
before_script:
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/certs/dist.cer.enc -d -a -out scripts/certs/dist.cer
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/certs/dist.p12.enc -d -a -out scripts/certs/dist.p12
- openssl aes-256-cbc -k "$ENCRYPTION_SECRET" -in scripts/profile/$PROFILE_NAME.mobileprovision.enc -d -a -out scripts/profile/$PROFILE_NAME.mobileprovision
- ./scripts/add-key.sh
- ./scripts/update-bundle.sh
script:
- xctool -workspace MeiQianZheng.xcworkspace -scheme MeiQianZheng -sdk iphoneos -configuration Release OBJROOT=$PWD/build SYMROOT=$PWD/build ONLY_ACTIVE_ARCH=NO TESTFLIGHT_APP_TOKEN=$TESTFLIGHT_APP_TOKEN HOCKEY_APP_ID=$HOCKEY_APP_ID
- xctool test -workspace MeiQianZheng.xcworkspace -scheme MeiQianZhengTests -sdk iphonesimulator ONLY_ACTIVE_ARCH=NO
after_script:
- ./scripts/remove-key.sh
after_success:
- ./scripts/sign-and-upload.sh
env:
global:
- APP_NAME="MeiQianZheng"
- 'DEVELOPER_NAME="iPhone Distribution: Chunhua Xu(C64LJ4RZPN)"'
- PROFILE_NAME="MeiQianZheng"
- secure: eLO79TtfUUNhiq5uV/sqEyz3wayaHGVd/YAtZHtYQ0gRenGt8yjG2TLr/8NkE4nbJ7b660B/Jx/snDb1z2Lpt+STXaMVwQ9HETFKx7aXS0juR6VL/sqivem/XwH4QQPCfiNH8sWfH4tQmiKw85lyj1TxKn40M5nT5KuLWk7DWMxO3VSHx0+ASJw6Tc96gUyzaxhF8H8RIZl60gAupJaWVYOCTx0eZwfKiOrwF/D5ksaHaBqXrPdnpB0l+y3bWRhG4K+cU1Be51XX7dJvCiDbsQlO/Ff9GYYPbkRozplGM2nHHtjBip2LVn8r7VUDAEBn+IWIgBByOfm7cVRetvjVR50qAjRSMtcoNmwv53ir1harBk+DbWOgaqnNgrMJY6Gp6PxoVHMArBcEPadK6AH7rj0kf+lCJgCnNDqH3TqUk2tQc3DUCDFGVjo3sBkWGi7DE8f6FkBhnmUCbXunIznOmeVNfawYg2ZmWAUD5BnEV4AA1E8CRxxmAuJwkuEEftc4fdJoLrtAIpn8ZwM8xD7GgjFO9/Sf0D1RnWtnooTQwB1e/nBn60fUVw2s/YUQG1fEUGBNSOw3bmkmW1ymjcQatCAAqGqyfnbMS4Ak5RGKT6h9zwCnlMg7+wSxdl3px38Z4eC/1BbQ1gigR10Pay4Tt4duneB2FGfGov5fQUVWXuk=
- secure: IBmq14d5qg8vWw7P6UxlLpXhH4qxhnV/rU8/vxtBy1dFlHWwi0MnOe3GDBx7hcyrpftYskzplAGG4ZEKMrgwxON4KIy2umhd2uqIsVdG9sHDnArSPTis5vY7f/W3FZbLTypOI8iOBTkvwVeazUcKICmZIIMhgeUqwjPuh1Fe4WwDZUBdBA/WIAdbSdk4JsyA1EWJm40UwwLdEsyFup8YbefLoGYg/8mwRfTDyZi3s5eANyUrwUJCZqxqGXdObUmxO/KJlDs4A4aggq/KTy7JKd38kwb7uiJ8gVRApieaJZrD2IU31ME7FoVoGHGnKKH941Iiik4mlxYCLPE3FpJIv47ZdgaFAymyaiCLcAG7Ai+iYB85cLjzHhLjY7eGkxz/6YGpO3T0DUiJWoyohfSMfLU9/aFqQ8zlC4R2QPHiwHrPyclLN+WqGR18GSz3kjpI0gKwz8bYDTXAuG+bgegCnp2FmUPf7CJogWVeDmyO3LcmSzxSraNdvAMVCG5zvGwQkC/7vgyVh4z04aF+5lV1MwktIc+OBWgg7DqKk37GP4kjgw0blrYVuKawbdalVhegNCyN6nE660ULI3sEqlnOFNtwH9mUVnnBWMPYePbN3UPg/fH2het6v9fOH7oow4uhIwGvrPIOQ9KnVzWea4/Fl2tqAGApl+MTwImJQLHJs7A=
- secure: JOSDIq2HtJu70I+rFmGEnQGMuXk756ehYJv2DoX92GtYbYRks6nmCqyvy4GIqhFsSPb1FmFUVLYrW+UdKckcsulM54l8Oc1KV7FgHkr5iEOXorGu8m3T7bsygNCmGd2BYZb2nt5gROAT2/i9doJDcUTFs96+Y/L7vH6cf8OPng1y5gH/QonGywTnysB5TF+5OgKkXVV27SiCMN9oONZjHluJuTzoq3wdRMgQr3UBtKE7XEbgDg/vCkV1KgeAsMbI2rCfHCjMl300bHCIC86t70yuM2B+SBcH36j4gINtfj5jFvGp6gTO/2E7IbrHhWJw1cOvrbEtQpftozwOGfr7oa/zOqS5RuYfJliGG67EKUgny+qqO9Fqxy28h6iQwV6b2XhsVWY7U0RKydvtMne4CMNx9pLi1tIynaEK94eezhRg1K9IVm/05s+PJlqPacTw0TeFpO7seEN/loMxIYH+nqAj6QhjncmtUQSBq+38Z9b15/VlzvRktZjxQhJDhi0Xh93WnWVQ/gqNgBW0Y+MnIAkPvGv0bXJFh/4OgqbtkIM2fY5IFoQOPhCTbTYRV++GTa+QxgkDfX4RecVePYiv6C+SU2EFisGmYDHQJo3ZqsMrA/8LJKMIrwQzYWeuE+w7HZMn/EI3ytZUsWZPo9LoVfHFDaVpcWTTDfTgCjyDvpw=
- secure: gAJnYLMszNGvVjuZSRm1cz8MEuuGo3xoRiJTIGZBEolnCOtL37NwEcKLI/ezxGPkBl1TnBN8ngV+sNPMOPYVf5IK8dGmo/fM1re9SESXkiM7vnczltvv2wyPSIMHoFzF3sqrn1jHNoeWeaQjDrbSrpfO7TL2uWzWh/Sx2GmnuUuqdoigDcoGMgsCbWR9ICiHJhglz1R+CqsrIP1S3ejjda+Q29oGgCJ/QPCJoM1mj6GonK1tKtVI+6OnkmARH/7tO2FzENguHZboSrN+nXHvvh9yqk5QVlN3xXTbM1sqS7QWDplKFeFcfcSZgyqx6qIlwnW+7f0obmppnBNdmqgyNJ8DcKOxtblUvu/NCsQJhNmY7Z+EIX6FSHvwtbg/BtmBKiX6ii1OrTOHB+8vZA44yAbRAEmSujL6g/U0AYl08jupoJ6PbReazE48RDNGxmIRxkVI8TplcD7f2ml8zslpgWznmh/MRKDeKA5XXGl81bwZQ9C5FzP6qF6WfXUsBFI9FZN+ktncOx/xLrCngfkLEeysDITsuPdqwIHoZchAgHCfzhFKlPz97fLPx3/LNQ16rbLR6IcKh/CeS7sOcHuJE5E74lQ5//isrv5coXtUUM4O16Pnshw5tAnTU0vKo0qgspNXYl33GdGERtr2s6YshJ+lera2k9oRTg5W/EoPGQ0=
- secure: GXRSuIhKsJYC0uDzWROzULAKGBHEIEL6MEawNPSpGlsIhMhy6NvdckJCzfks0ixsjSvAvgJgyFfb2MdR0xc9n3/2J6zVWupIxQ5WWUn9J5FeMEnIQVXWhOOyL1M849eOypG11mXvJCi6sTK4exm7BSi87t3kB6/RwVAtObmSO8OBySVS+6IeP7NkMBBiPm7Lul2NBRZ7WLS/KnwoGKjGExo5/dtdA7YiR4UTV+cX7TGOF9xeRi8A7x5iexgiSVMan7DmnJv6HRxJTlU8Sq7Sf6vQtHkk1ZzBasREmGxbIq4zh/sdpocP6eKdhP7SbhyNSzzTVQ+Q1ptZyupP8juZnzwSgnOIz1eZxk9m46TF68QK0i/0BXWbKyUbPUtyM3VDtNl50ubxMNjlxlNYOTGVFInnfyq8/V9fX+Oc4tmyov4TaRUv+zJ5fOWHwx49AmAicphDpivV7TwnGgDsUZ87PqsfZcGACZN5K57Smj5b8nPx/qLxtRPXPCQrNExrfHDYcOO52PA9dRaQLu/kBdU+JB2KxQXSm4jiv7gMLPzI9OmxaU+xDC6q+If/DouDlILI8EzFy5mcCupT82VOP8wCkeifug/Lki2neSDoy+OspLfzngBVqoVnjsWPlSV6Bpd5d4y3723kwcWKx89bvMi6uTmFbJwEgZEIG8LUiWPPLcM=
